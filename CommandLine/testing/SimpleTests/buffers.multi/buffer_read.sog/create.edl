var buf = buffer_create(4, buffer_fixed, buffer_sizeof(buffer_u8));
buffer_fill(buf, 0, buffer_u8, 15, buffer_get_size(buf));

for var i = 0; i < buffer_get_size(buf); ++i {
    gtest_assert_eq(buffer_tell(buf), i);
    gtest_assert_eq(buffer_read(buf, buffer_u8), 15);
}

buffer_delete(buf);

buf = buffer_create(4, buffer_grow, buffer_sizeof(buffer_u8));
buffer_fill(buf, 0, buffer_u8, 15, buffer_get_size(buf) + 8);
var len = buffer_get_size(buf);
for var i = 0; i < len; ++i {
    gtest_assert_eq(buffer_tell(buf), i);
    gtest_assert_eq(buffer_read(buf, buffer_u8), 15);
}

buffer_delete(buf);
game_end();
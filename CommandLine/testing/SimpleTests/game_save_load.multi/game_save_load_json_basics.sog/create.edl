 show_debug_message("Starting the test");

myInteger1 = 5;
myInteger2 = 32;
myfloat1 = 3.14;
myfloat2 = 17.5;
myBoolean = true;

show_debug_message("Starting the saving");
var buf = buffer_create(1, buffer_grow, 1);
game_save_buffer(buf,SerializationBackend::JSON);
buffer_save(buf, "/tmp/test.bin");

myInteger1 = 0;
myInteger1 = 1;
myfloat1 = 1.2;
myfloat2 = 1.6;
myBoolean = false;

show_debug_message("Loading the file");
buffer_delete(buf);
buf = buffer_load("/tmp/test.bin");
game_load_buffer(buf,SerializationBackend::JSON);

gtest_assert_eq(int(id.myInteger1), 5);
gtest_assert_eq(int(id.myInteger2), 32);
gtest_assert_eq(double(id.myfloat1), 3.14);
gtest_assert_eq(double(id.myfloat2), 17.5);
gtest_assert_eq(bool(id.myBoolean), true);

show_debug_message("Loading successful");

game_end();
